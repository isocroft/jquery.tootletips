/*! 
 * Inspired by --> (http://css-trick.com/bubbles-point-tooltips-with-css3-jquery)
 */
;(function(n,t){n.fn.tootletip=function(i){var s=!0,w="marginTop",o=null,e=!1,tt={bottomGuage:9,resetPosition:e,showTip:e,eventsTriggerIn:"",eventsTriggerOut:"",preferedPosition:"bottom",attributes:["title"],delay:0,tipEvents:{onFinishIn:function(){},onFinishOut:function(){}}},b=n(window),k="mouseleave",d="mouseenter",h=o,u=o,r,c=n("body"),l=c[0].runtimeStyle&&parseInt(c[0].runtimeStyle.getAttribute(w))||parseInt(c.css(w)),ut,a=function(n,t){var r,i=n.clone(),u="outer"+t.replace(/^./,t[0].toUpperCase());return i.css("visibility","hidden"),c.append(i),r=i[u](),i.remove(),r},f=0,v=" ",y=function(){var n=t.createElement("p").style,i="transition"in n||"WebkitTransition"in n||"MozTransition"in n||"msTransition"in n||"OTransition"in n;return{isSupported:i}}(),g=function(t,i,r,u){t&&t.stop(s,s).animate(i,{queue:e,duration:200,specialEasing:{opacity:r?"easeInQuad":"easeOutQuad",margin:r?"easeInBounce":"easeOutBounce"},step:function(t,i){n(this).css({zIndex:i.pos*5e3})},complete:function(){u(t)}})},it={left:"arrow-e-tip",top:"arrow-s-tip",bottom:"arrow-n-tip",right:"arrow-w-tip"},p=function(t,i){var r=typeof i=="string"?i:o;return n.isPlainObject(i)?(n.each(i,function(n,i){!r&&t.is(n)&&(r=i)}),r):r},nt=function(n,t,r){var s=p(n,r);i.showTip&&(f=12);var u=n.offset(),e={width:n.outerWidth(),height:n.outerHeight()},o={width:a(t,"width"),height:a(t,"height")},h={bottom:{top:u.top+e.height+f-l,left:u.left+e.width/2-(o.width/2+i.bottomGuage)},left:{top:u.top-l-5+e.height/2-o.height/2,left:u.left-o.width-f},top:{top:u.top-e.height-f-5+l,left:u.left+e.width/2-(o.width/2+i.bottomGuage)},right:{top:u.top-l-5+e.height/2-o.height/2,left:u.left+e.width+f}};return i.showTip&&t.find("i").eq(0).addClass(it[s]),h[s]},rt=function(t,r){h=b.outerHeight(),u=b.outerWidth();var f=p(t,i.preferedPosition),e=t.offset(),c=r.position(),l={width:t.outerWidth(),height:t.outerHeight()},v={width:a(r,"width"),height:a(r,"height")},y={left:Math.abs(e.left)-u+Math.abs(c.left)>u,top:Math.abs(e.top)-h+Math.abs(c.top)>h||e.left-u+c.left>u,right:e.left+l.width+(Math.abs(c.left)+v.width)>u,bottom:e.top+l.height+(Math.abs(c.top)+v.height)>h||e.left-u+c.left>u};if(typeof f=="string"){if(y[f]===s)return f;f=o}return n.each(y,function(n,t){!f&&t&&(f=n)}),f};return i=n.extend(tt,i),n.inArray(d,i.eventsTriggerIn.split(v))<0&&(i.eventsTriggerIn+=String(v+d)),n.inArray(k,i.eventsTriggerOut.split(v))<0&&(i.eventsTriggerOut+=String(v+k)),this.each(function(t,u){var c="tooltip-active",h="transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",o="tooltip-target",l="div[data-tooltip=",f=n(u).attr("data-tooltip-target",t),a=n.grep(i.attributes,function(n){return!!f.attr(n)})[0]||"";r=n('<div class="tooltip" data-tooltip="'+t+'">'+f.attr(a)+'<i class="arrow-tip"><\/i><\/div>').appendTo("body"),r.css(nt(f,r,i.preferedPosition));f.removeAttr(a).on(i.eventsTriggerIn,function(t){var e,f,u=n(this);r=n(l+u.data(o)+"]");r.on(h,function(r){console.log(t.type+": transitionEnd Event!");var f=n(this);i.tipEvents.onFinishIn(f,u);f.off(r)});f=i.resetPosition?rt(u,r):p(u,i.preferedPosition),r.css(nt(u,r,f)),e=setTimeout(function(){y.isSupported?r.addClass(c):g(r,{opacity:1,margin:"5px"},s,i.tipEvents.onFinishIn),clearTimeout(e)},100)}).on(i.eventsTriggerOut,function(){var u="tooltip-out",f,s=n(this),r=n(l+s.data(o)+"]");r.on(h,function(t){var r=n(this);i.tipEvents.onFinishOut(r,s);r.off(t)});y.isSupported?r.addClass(u):g(r,{opacity:0,marginTop:"-20px"},e,i.tipEvents.onFinishOut),f=setTimeout(function(){y.isSupported&&r.removeClass(c).removeClass(u),clearTimeout(f)},300)})})}})(jQuery,this.document);
